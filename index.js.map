{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default function imageAPIRequest(imageName, page = 1) {\n  return axios.get('https://pixabay.com/api/', {\n    params: {\n      ...searchParams,\n      q: imageName,\n      page,\n    },\n  });\n}\n\nconst searchParams = {\n  key: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: '15',\n};\n","import SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport default function updateImageMarkup(images) {\n  const imagesMarkup = images.map(image => {\n    return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${\n          image.largeImageURL\n        }\"><img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${\n      image.tags\n    }\" width=\"${300}\" height=\"${200}\" data-user=\"${image.user}\"></a>\n        <ul class=\"gallery-image-description-list\">\n            <li class=\"gallery-image-description-item\">\n                <h3 class=\"gallery-image-description-title\">Likes</h3>\n                <p class=\"gallery-image-description-text\">${image.likes}</p>\n            </li>\n            <li class=\"gallery-image-description-item\">\n                <h3 class=\"gallery-image-description-title\">Views</h3>\n                <p class=\"gallery-image-description-text\">${image.views}</p>\n            </li>\n            <li class=\"gallery-image-description-item\">\n                <h3 class=\"gallery-image-description-title\">Comments</h3>\n                <p class=\"gallery-image-description-text\">${image.comments}</p>\n            </li>\n            <li class=\"gallery-image-description-item\">\n                <h3 class=\"gallery-image-description-title\">Downloads</h3>\n                <p class=\"gallery-image-description-text\">${image.downloads}</p>\n            </li>\n        </ul>\n      </li>`;\n  });\n  refs.gallery.insertAdjacentHTML('beforeend', imagesMarkup.join(''));\n  modalGallery.refresh();\n}\n\nconst modalGallery = new SimpleLightbox('.gallery-link', {\n  captionsData: 'data-user',\n  captionDelay: 250,\n});\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport imageAPIRequest from './js/pixabay-api';\nimport imageRender from './js/render-functions';\n\nconst messageOptions = {\n  class: 'message',\n  titleColor: '#fff',\n  titleSize: '16',\n  titleLineHeight: '1.5',\n  messageColor: '#fff',\n  messageSize: '16',\n  imageWidth: 24,\n  maxWidth: 432,\n  theme: 'dark',\n  close: false,\n  position: 'topRight',\n  timeout: 5000,\n};\nconst errorMessageOptions = {\n  ...messageOptions,\n  backgroundColor: '#ef4040',\n  image: './img/error-message-icon.svg',\n  close: true,\n};\nconst infoMessageOptions = {\n  ...messageOptions,\n  backgroundColor: '#0099FF',\n};\nconst refs = {\n  searchForm: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  galleryLoadBtn: document.querySelector('.gallery-load-btn'),\n  loader: document.querySelector('.loader'),\n};\n\nlet totalPages;\nlet page;\nlet searchText;\n\nrefs.searchForm.addEventListener('submit', searchFormSubmit);\nrefs.galleryLoadBtn.addEventListener('click', loadMore);\n\nfunction searchFormSubmit(event) {\n  event.preventDefault();\n  searchText = event.currentTarget.elements.searchText.value.trim();\n  if (!textValidation(searchText)) {\n    return;\n  }\n  refs.gallery.innerHTML = '';\n  refs.loader.classList.remove('hidden');\n  imageAPIRequest(searchText)\n    .then(imageData => {\n      if (imageData.data.hits.length === 0) {\n        createErrorMessage(\n          '',\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        return;\n      }\n      imageRender(imageData.data.hits);\n      totalPages = Math.ceil(imageData.data.totalHits / 15);\n      page = 2;\n      if (totalPages <= 1) {\n        console.log(iziToast);\n        iziToast.info({\n          ...infoMessageOptions,\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        return;\n      }\n      refs.galleryLoadBtn.classList.remove('hidden');\n    })\n    .catch(error => {\n      createErrorMessage(\n        error.name,\n        `Sorry, the following error occured: ${error.message}`\n      );\n    })\n    .finally(() => refs.loader.classList.add('hidden'));\n}\n\nfunction loadMore() {\n  refs.galleryLoadBtn.classList.add('hidden');\n  refs.loader.classList.remove('hidden');\n  imageAPIRequest(searchText, page)\n    .then(imageData => {\n      imageRender(imageData.data.hits);\n    })\n    .catch(error => {\n      createErrorMessage(\n        error.name,\n        `Sorry, the following error occured: ${error.message}`\n      );\n    })\n    .finally(() => {\n      refs.loader.classList.add('hidden');\n      page++;\n      if (page > totalPages) {\n        page = 2;\n        iziToast.info({\n          ...infoMessageOptions,\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        return;\n      }\n      refs.galleryLoadBtn.classList.remove('hidden');\n    });\n}\n\nfunction textValidation(text) {\n  return text !== '' ? true : false;\n}\n\nfunction createErrorMessage(title, message) {\n  iziToast.show({\n    ...errorMessageOptions,\n    title,\n    message,\n  });\n}\n"],"names":["imageAPIRequest","imageName","page","axios","searchParams","updateImageMarkup","images","imagesMarkup","image","refs","modalGallery","SimpleLightbox","messageOptions","errorMessageOptions","infoMessageOptions","totalPages","searchText","searchFormSubmit","loadMore","event","textValidation","imageData","createErrorMessage","imageRender","iziToast","error","text","title","message"],"mappings":"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"}